<UserControl x:Class="Ink_Canvas.Views.Settings.Pages.WhiteboardSettingsPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
             xmlns:ic="clr-namespace:Ink_Canvas"
             xmlns:local="clr-namespace:Ink_Canvas.Views.Settings.Pages"
             mc:Ignorable="d"
             d:DesignHeight="1200" d:DesignWidth="800"
             Background="Transparent">

    <ui:DynamicScrollViewer VerticalScrollBarVisibility="Auto" PanningMode="VerticalOnly">
        <StackPanel Margin="0,0,12,24">
             <!-- Header -->
            <ui:TextBlock Text="白板" FontTypography="Title" Margin="0,0,0,8" />
            <ui:TextBlock Text="白板功能与行为设置" FontTypography="Body" Foreground="{DynamicResource TextFillColorSecondaryBrush}" Margin="0,0,0,24" />

            <!-- Background Group -->
            <ui:TextBlock Text="背景与页面" FontTypography="BodyStrong" Margin="0,0,0,8"/>
            <ui:CardExpander Margin="0,0,0,24" IsExpanded="True">
                <ui:CardExpander.Icon>
                    <ui:SymbolIcon Symbol="Color24"/>
                </ui:CardExpander.Icon>
                <ui:CardExpander.Header>
                    <ui:TextBlock Text="背景默认值与行为" FontTypography="Body"/>
                </ui:CardExpander.Header>
                <StackPanel>
                    <!-- Default Color -->
                    <Grid Margin="0,0,0,12">
                         <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                         </Grid.ColumnDefinitions>
                         <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                            <ui:TextBlock Text="白板模式默认背景色" VerticalAlignment="Center"/>
                            <Border Background="{DynamicResource SystemAccentColorPrimaryBrush}" CornerRadius="4" Margin="8,0,0,0" Padding="6,2">
                                <TextBlock Text="新功能" FontSize="10" Foreground="White"/>
                            </Border>
                         </StackPanel>
                         <ComboBox Grid.Column="1" MinWidth="120" SelectedValue="{Binding Whiteboard.BlackboardBackgroundColor, Mode=TwoWay}" SelectedValuePath="Tag">
                            <ComboBoxItem Content="灰黑" Tag="{x:Static ic:BlackboardBackgroundColorEnum.GrayBlack}"/>
                            <ComboBoxItem Content="黑板绿" Tag="{x:Static ic:BlackboardBackgroundColorEnum.BlackBoardGreen}"/>
                            <ComboBoxItem Content="白色" Tag="{x:Static ic:BlackboardBackgroundColorEnum.White}"/>
                            <ComboBoxItem Content="蓝黑" Tag="{x:Static ic:BlackboardBackgroundColorEnum.BlueBlack}"/>
                            <ComboBoxItem Content="护眼绿" Tag="{x:Static ic:BlackboardBackgroundColorEnum.EyeProtectionGreen}"/>
                            <ComboBoxItem Content="纯黑" Tag="{x:Static ic:BlackboardBackgroundColorEnum.RealBlack}"/>
                         </ComboBox>
                    </Grid>

                    <!-- Default Pattern -->
                    <Grid Margin="0,0,0,12">
                         <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                         </Grid.ColumnDefinitions>
                         <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                            <ui:TextBlock Text="白板模式默认背景稿纸格式" VerticalAlignment="Center"/>
                            <Border Background="{DynamicResource SystemAccentColorPrimaryBrush}" CornerRadius="4" Margin="8,0,0,0" Padding="6,2">
                                <TextBlock Text="新功能" FontSize="10" Foreground="White"/>
                            </Border>
                         </StackPanel>
                         <ComboBox Grid.Column="1" MinWidth="120" SelectedValue="{Binding Whiteboard.BlackboardBackgroundPattern, Mode=TwoWay}" SelectedValuePath="Tag">
                            <ComboBoxItem Content="无" Tag="{x:Static ic:BlackboardBackgroundPatternEnum.None}"/>
                            <ComboBoxItem Content="点阵" Tag="{x:Static ic:BlackboardBackgroundPatternEnum.Dots}"/>
                            <ComboBoxItem Content="网格" Tag="{x:Static ic:BlackboardBackgroundPatternEnum.Grid}"/>
                         </ComboBox>
                    </Grid>
                    
                    <Separator Margin="0,0,0,12"/>

                    <!-- Use Default Color -->
                    <Grid Margin="0,0,0,12">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <ui:TextBlock Text="白板创建新页时始终使用默认背景色" VerticalAlignment="Center"/>
                        <ui:ToggleSwitch Grid.Column="1" IsChecked="{Binding Whiteboard.UseDefaultBackgroundColorForEveryNewAddedBlackboardPage, Mode=TwoWay}"/>
                    </Grid>

                    <!-- Use Default Pattern -->
                    <Grid Margin="0,0,0,12">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <ui:TextBlock Text="白板创建新页时始终使用默认背景稿纸格式" VerticalAlignment="Center"/>
                            <ui:TextBlock Text="开启后，每次在白板模式下新建页面都会使用默认背景色和背景稿纸格式。如果关闭，则继承当前页面属性。" Foreground="{DynamicResource TextFillColorSecondaryBrush}" FontTypography="Caption" TextWrapping="Wrap"/>
                        </StackPanel>
                        <ui:ToggleSwitch Grid.Column="1" IsChecked="{Binding Whiteboard.UseDefaultBackgroundPatternForEveryNewAddedBlackboardPage, Mode=TwoWay}" VerticalAlignment="Top"/>
                    </Grid>

                    <!-- Auto Convert Ink Color -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <ui:TextBlock Text="白板模式更换背景色同时也更换墨迹颜色" VerticalAlignment="Center"/>
                            <ui:TextBlock Text="开启后，背景明暗切换时自动反转墨迹亮度（自定义颜色除外）。" Foreground="{DynamicResource TextFillColorSecondaryBrush}" FontTypography="Caption" TextWrapping="Wrap"/>
                        </StackPanel>
                        <ui:ToggleSwitch Grid.Column="1" IsChecked="{Binding Whiteboard.IsEnableAutoConvertInkColorWhenBackgroundChanged, Mode=TwoWay}" VerticalAlignment="Top"/>
                    </Grid>
                </StackPanel>
            </ui:CardExpander>

            <!-- Behavior Group -->
            <ui:TextBlock Text="行为与杂项" FontTypography="BodyStrong" Margin="0,0,0,8"/>
            
            <ui:CardControl Margin="0,0,0,4">
                <ui:CardControl.Icon>
                    <ui:SymbolIcon Symbol="EyeOff24"/>
                </ui:CardControl.Icon>
                <ui:CardControl.Header>
                    <StackPanel>
                        <ui:TextBlock Text="退出画板模式后隐藏墨迹" FontTypography="Body"/>
                        <ui:TextBlock Text="开启后，进入 PPT 模式时未处于批注模式时不会显示墨迹。" FontTypography="Caption" Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                    </StackPanel>
                </ui:CardControl.Header>
                <ui:ToggleSwitch IsChecked="{Binding Whiteboard.HideInkAfterExitBoardMode, Mode=TwoWay}"/>
            </ui:CardControl>

            <ui:CardControl Margin="0,0,0,4">
                <ui:CardControl.Icon>
                    <ui:SymbolIcon Symbol="Delete24"/>
                </ui:CardControl.Icon>
                <ui:CardControl.Header>
                    <ui:TextBlock Text="清空墨迹时删除墨迹历史记录" FontTypography="Body"/>
                </ui:CardControl.Header>
                <ui:ToggleSwitch IsChecked="{Binding Whiteboard.ClearCanvasAndClearTimeMachine, Mode=TwoWay}"/>
            </ui:CardControl>
            
            <ui:CardControl Margin="0,0,0,4">
                <ui:CardControl.Icon>
                    <ui:SymbolIcon Symbol="Pen24"/>
                </ui:CardControl.Icon>
                <ui:CardControl.Header>
                    <ui:TextBlock Text="让墨迹使用贝塞尔曲线平滑处理" FontTypography="Body"/>
                </ui:CardControl.Header>
                <ui:ToggleSwitch IsChecked="{Binding Whiteboard.FitToCurve, Mode=TwoWay}"/>
            </ui:CardControl>

            <ui:CardControl Margin="0,0,0,24">
                <ui:CardControl.Icon>
                    <ui:SymbolIcon Symbol="MathFormatLinear24"/>
                </ui:CardControl.Icon>
                <ui:CardControl.Header>
                    <StackPanel>
                        <ui:TextBlock Text="保留双曲线渐近线" FontTypography="Body"/>
                        <ui:TextBlock Text="Ink Canvas祖传Bug。若不保留双曲线渐近线可能会有撤回相关的BUG。" FontTypography="Caption" Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                    </StackPanel>
                </ui:CardControl.Header>
                <ComboBox MinWidth="120" SelectedValue="{Binding Whiteboard.HyperbolaAsymptoteOption, Mode=TwoWay}" SelectedValuePath="Tag">
                    <ComboBoxItem Content="是" Tag="{x:Static ic:OptionalOperation.Yes}"/>
                    <ComboBoxItem Content="否" Tag="{x:Static ic:OptionalOperation.No}"/>
                    <ComboBoxItem Content="每次询问" Tag="{x:Static ic:OptionalOperation.Ask}"/>
                </ComboBox>
            </ui:CardControl>

            <!-- Selection Group -->
            <ui:TextBlock Text="选择" FontTypography="BodyStrong" Margin="0,0,0,8"/>
            <ui:TextBlock Text="使用左键点击墨迹可以直接选中墨迹；使用右键可以始终触发矩形或套索框选模式，而不会选中被鼠标按下的墨迹。" FontTypography="Caption" Foreground="{DynamicResource TextFillColorSecondaryBrush}" Margin="0,0,0,12" TextWrapping="Wrap"/>

            <ui:CardControl Margin="0,0,0,4">
                <ui:CardControl.Icon>
                    <ui:SymbolIcon Symbol="SelectObject24"/>
                </ui:CardControl.Icon>
                <ui:CardControl.Header>
                     <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <ui:TextBlock Text="墨迹选择模式" VerticalAlignment="Center"/>
                        <Border Background="{DynamicResource SystemAccentColorPrimaryBrush}" CornerRadius="4" Margin="8,0,0,0" Padding="6,2">
                            <TextBlock Text="新功能" FontSize="10" Foreground="White"/>
                        </Border>
                    </StackPanel>
                </ui:CardControl.Header>
                <ComboBox MinWidth="120" SelectedIndex="{Binding Whiteboard.SelectionMethod, Mode=TwoWay}">
                    <ComboBoxItem Content="矩形选框"/>
                    <ComboBoxItem Content="套索圈选"/>
                </ComboBox>
            </ui:CardControl>

            <ui:CardControl Margin="0,0,0,4">
                <ui:CardControl.Icon>
                    <ui:SymbolIcon Symbol="ResizeLarge24"/>
                </ui:CardControl.Icon>
                <ui:CardControl.Header>
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <ui:TextBlock Text="将墨迹缩放应用于触笔笔尖" VerticalAlignment="Center"/>
                        <Border Background="{DynamicResource SystemAccentColorPrimaryBrush}" CornerRadius="4" Margin="8,0,0,0" Padding="6,2">
                            <TextBlock Text="新功能" FontSize="10" Foreground="White"/>
                        </Border>
                    </StackPanel>
                </ui:CardControl.Header>
                <ui:ToggleSwitch IsChecked="{Binding Whiteboard.ApplyScaleToStylusTip, Mode=TwoWay}"/>
            </ui:CardControl>

            <ui:CardControl Margin="0,0,0,4">
                <ui:CardControl.Icon>
                    <ui:SymbolIcon Symbol="SelectAllOn24"/>
                </ui:CardControl.Icon>
                <ui:CardControl.Header>
                     <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <ui:TextBlock Text="仅命中全部包含的墨迹" VerticalAlignment="Center"/>
                        <Border Background="{DynamicResource SystemAccentColorPrimaryBrush}" CornerRadius="4" Margin="8,0,0,0" Padding="6,2">
                            <TextBlock Text="新功能" FontSize="10" Foreground="White"/>
                        </Border>
                    </StackPanel>
                </ui:CardControl.Header>
                <ui:ToggleSwitch IsChecked="{Binding Whiteboard.OnlyHitTestFullyContainedStrokes, Mode=TwoWay}"/>
            </ui:CardControl>

            <ui:CardControl Margin="0,0,0,4">
                <ui:CardControl.Icon>
                    <ui:SymbolIcon Symbol="LockOpen24"/>
                </ui:CardControl.Icon>
                <ui:CardControl.Header>
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <ui:TextBlock Text="允许点选命中被锁定的墨迹" VerticalAlignment="Center"/>
                        <Border Background="{DynamicResource SystemAccentColorPrimaryBrush}" CornerRadius="4" Margin="8,0,0,0" Padding="6,2">
                            <TextBlock Text="新功能" FontSize="10" Foreground="White"/>
                        </Border>
                    </StackPanel>
                </ui:CardControl.Header>
                <ui:ToggleSwitch IsChecked="{Binding Whiteboard.AllowHitTestLockedStrokes, Mode=TwoWay}"/>
            </ui:CardControl>

        </StackPanel>
    </ui:DynamicScrollViewer>
</UserControl>
