<UserControl x:Class="Ink_Canvas.Views.Settings.SettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:ui="http://schemas.inkore.net/lib/ui/wpf/modern"
             xmlns:vm="clr-namespace:Ink_Canvas.ViewModels"
             xmlns:Controls="http://schemas.inkore.net/lib/ui/wpf/modern"
             mc:Ignorable="d"
             d:DesignHeight="600" d:DesignWidth="490"
             d:DataContext="{d:DesignInstance Type=vm:SettingsViewModel}">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="SettingsResources.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>

    <Grid>
        <!-- 设置面板主体 -->
        <Border Name="BorderSettings"
                Background="#ee18181b"
                ui:ThemeManager.RequestedTheme="Dark">
            <Grid>
                <!-- 滚动内容区域 -->
                <ui:ScrollViewerEx Margin="0,80,12,0"
                                   VerticalScrollBarVisibility="Hidden"
                                   PanningMode="VerticalOnly"
                                   ui:ThemeManager.RequestedTheme="Dark"
                                   Name="SettingsPanelScrollViewer">
                    <StackPanel Margin="70,20,20,20" Name="SettingsContentPanel">
                        <!-- 顶部操作按钮区域 -->
                        <Border Margin="0,0,0,10" Height="100" CornerRadius="5"
                                BorderBrush="#a1a1aa" BorderThickness="1">
                            <ui:SimpleStackPanel VerticalAlignment="Center">
                                <TextBlock Foreground="#fafafa"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center"
                                           FontSize="15"
                                           Margin="0,0,0,10"
                                           Text="设置更改将自动保存，部分设置需要重启软件后生效" />
                                <ui:SimpleStackPanel Spacing="5">
                                    <ui:SimpleStackPanel Spacing="5"
                                                         Orientation="Horizontal"
                                                         HorizontalAlignment="Center">
                                        <Button Width="116" Height="45"
                                                FontFamily="Microsoft YaHei UI"
                                                Name="BtnRestart"
                                                Command="{Binding RestartCommand}">
                                            <ui:SimpleStackPanel Orientation="Horizontal"
                                                                 VerticalAlignment="Center"
                                                                 HorizontalAlignment="Center"
                                                                 Spacing="0">
                                                <Image RenderOptions.BitmapScalingMode="HighQuality"
                                                       Margin="0,0,6,0" Height="20" Width="20"
                                                       Source="{StaticResource RestartIcon}"/>
                                                <Label FontSize="16" Foreground="#fafafa"
                                                       VerticalAlignment="Center"
                                                       FontFamily="Microsoft YaHei UI"
                                                       FontWeight="Bold">
                                                    重启
                                                </Label>
                                            </ui:SimpleStackPanel>
                                        </Button>
                                        <Button Width="116" Height="45"
                                                FontFamily="Microsoft YaHei UI"
                                                Name="BtnResetToSuggestion"
                                                Command="{Binding ResetSettingsCommand}"
                                                Margin="0,0,0,0">
                                            <ui:SimpleStackPanel Orientation="Horizontal"
                                                                 VerticalAlignment="Center"
                                                                 HorizontalAlignment="Center"
                                                                 Spacing="0">
                                                <Image Margin="0,0,4,0"
                                                       RenderOptions.BitmapScalingMode="HighQuality"
                                                       Height="20" Width="20"
                                                       Source="{StaticResource ResetIcon}"/>
                                                <Label Margin="2,0,0,0" FontSize="16"
                                                       VerticalAlignment="Center"
                                                       FontFamily="Microsoft YaHei UI">
                                                    重置
                                                </Label>
                                            </ui:SimpleStackPanel>
                                        </Button>
                                        <Button Width="116" Height="45"
                                                FontFamily="Microsoft YaHei UI"
                                                Name="BtnExit"
                                                Command="{Binding ExitCommand}">
                                            <ui:SimpleStackPanel Orientation="Horizontal"
                                                                 VerticalAlignment="Center"
                                                                 HorizontalAlignment="Center"
                                                                 Spacing="0">
                                                <Image RenderOptions.BitmapScalingMode="HighQuality"
                                                       Margin="0,0,6,0" Height="20" Width="20"
                                                       Source="{StaticResource ExitIcon}"/>
                                                <Label Foreground="#fafafa" FontSize="16"
                                                       VerticalAlignment="Center"
                                                       FontFamily="Microsoft YaHei UI"
                                                       FontWeight="Bold">
                                                    退出
                                                </Label>
                                            </ui:SimpleStackPanel>
                                        </Button>
                                    </ui:SimpleStackPanel>
                                </ui:SimpleStackPanel>
                            </ui:SimpleStackPanel>
                        </Border>

                        <!-- 提示信息 -->
                        <TextBlock Text="设置已迁移到新版界面，请点击下方按钮打开。"
                                   Foreground="#fafafa"
                                   HorizontalAlignment="Center"
                                   Margin="0,20,0,0"
                                   FontSize="16"/>

                        <!-- 打开新版设置按钮 -->
                        <Button Content="打开新版设置"
                                HorizontalAlignment="Center"
                                Margin="0,20,0,0"
                                Width="200" Height="40"
                                Click="BtnOpenNewSettingsWindow_Click"/>
                    </StackPanel>
                </ui:ScrollViewerEx>

                <!-- 顶部标题栏 -->
                <Grid ClipToBounds="True" Margin="50,0,0,0" Height="80" VerticalAlignment="Top">
                    <Border Background="#18181b" CornerRadius="0" Margin="-1,-1,-1,0">
                        <ui:SimpleStackPanel Orientation="Horizontal" VerticalAlignment="Center">
                            <TextBlock Foreground="White" Margin="25,-2,0,0"
                                       Text="设置" FontWeight="Bold" FontSize="32" />
                        </ui:SimpleStackPanel>
                    </Border>
                    <Canvas>
                        <Image Canvas.Top="12" Canvas.Right="-16" Width="98" Height="98" Opacity="0.4"
                               Source="{StaticResource SettingsGearIcon}">
                            <Image.RenderTransform>
                                <RotateTransform CenterX="49" CenterY="49" />
                            </Image.RenderTransform>
                            <Image.Triggers>
                                <EventTrigger RoutedEvent="Loaded">
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation
                                                Storyboard.TargetProperty="(Image.RenderTransform).(RotateTransform.Angle)"
                                                To="-360" Duration="0:0:3" RepeatBehavior="Forever" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </EventTrigger>
                            </Image.Triggers>
                        </Image>
                    </Canvas>
                </Grid>

                <!-- 左侧导航栏 (已移除内容，仅保留背景) -->
                <Grid Panel.ZIndex="998" Width="50" HorizontalAlignment="Left" Background="#AA09090b">
                </Grid>
            </Grid>
        </Border>
    </Grid>
</UserControl>
